/*
 * This file was generated by the Gradle 'init' task.
 */

pluginManagement {
    repositories {
        maven {
            url = "https://maven.fabricmc.net"
            name = "FabricMC"
        }
        gradlePluginPortal()
    }
}

rootProject.name = 'hotpur-parent'

if(!rootProject.projectDir.toPath().resolve("Hotpur-API").resolve("build.gradle").toFile().isFile()
        || !rootProject.projectDir.toPath().resolve("Hotpur-API").resolve("build.gradle").toFile().isFile()
        || !rootProject.projectDir.toPath().resolve("Hotpur-fabric-loader").resolve("build.gradle").toFile().isFile()) {
    if(!rootProject.projectDir.toPath().resolve("Purpur").resolve("purpur").toFile().isFile()) {
        print "Updating upstream"
        exec {
            workingDir rootProject.projectDir
            commandLine './hotpur', 'up'
        }
    }
    print "Patching Hotpur"
    exec {
        workingDir rootProject.projectDir
        commandLine './hotpur', 'patch'
    }
}

include(':hotpur-api')
include(':hotpur')
project(':hotpur-api').projectDir = file('Hotpur-API')
project(':hotpur').projectDir = file('Hotpur-Server')
include ':Paper-MojangAPI'
include(':fabric-loader')
project(':fabric-loader').projectDir = file('Hotpur-fabric-loader')

